# 제품 요구사항 문서 (PRD)

## 작업 체크리스트

### 1. 프로젝트 초기 설정
- [x] Next.js 프로젝트 생성
- [x] Tailwind CSS 설정
- [x] shadcn UI 설치 및 구성
- [x] 프로젝트 구조 설계
- [x] Git 저장소 설정
- [x] 환경 변수 설정 (.env)
  - [x] Supabase 프로젝트 URL
  - [x] Supabase 프로젝트 anon key

### 2. Supabase 설정
- [x] Supabase 프로젝트 생성
- [x] 데이터베이스 테이블 설계
  - [x] users 테이블
  - [x] work_records 테이블
  - [x] profiles 테이블 (필요시)
- [x] RLS(Row Level Security) 정책 설정
- [x] 인증 설정
  - [x] 이메일/비밀번호 인증
  - [x] OAuth 제공자 설정 (선택사항)
- [x] 데이터베이스 인덱스 설정

### 3. 인증/인가 구현
- [x] 로그인 페이지 구현
  - [x] 이메일/비밀번호 로그인 폼
  - [x] 소셜 로그인 버튼 (선택사항)
- [x] 회원가입 페이지 구현
- [x] 비밀번호 재설정 기능
- [x] 인증 상태 관리 (React Context)
- [x] 보호된 라우트 설정

### 4. UI 구현
- [x] 레이아웃 구조 설계
- [x] 공통 컴포넌트 구현
  - [x] 네비게이션 바
  - [x] 사이드바
  - [x] 로딩 스피너
  - [x] 에러 경계
- [x] 좌측 패널 (입력 폼) 구현
  - [x] 날짜 선택기 (Calendar 컴포넌트)
  - [x] 작업자 정보 입력 폼
  - [x] 시간 입력 컴포넌트
- [x] 우측 패널 (데이터 테이블) 구현
  - [x] 테이블 컴포넌트
  - [x] 페이지네이션
  - [x] 정렬 기능
  - [x] 필터링
- [x] 모달 컴포넌트
- [x] 토스트 메시지

### 5. 기능 구현
- [x] Supabase 클라이언트 설정
- [x] 작업 기록 CRUD 작업
  - [x] 데이터 조회 (실시간 구독 설정)
  - [x] 데이터 생성
  - [x] 데이터 수정
  - [x] 데이터 삭제
- [x] 작업 시간 계산 로직
  - [x] 주간 시간 계산 (08:00-17:00)
  - [x] 야간 시간 계산 (17:00-22:00)
  - [x] 심야 시간 계산 (22:00-08:00)
- [x] 검색 및 필터링
  - [x] 날짜별 검색
  - [x] 이름/업체 검색
  - [x] 필터링 기능
- [x] 사용자 프로필 관리

### 6. 테스트
- [x] Jest 설정
- [x] React Testing Library 설정
- [x] 단위 테스트 작성
  - [x] 컴포넌트 테스트
  - [x] 유틸리티 함수 테스트
- [x] 통합 테스트 작성
- [x] E2E 테스트 (Playwright)
- [x] 성능 테스트

### 7. 배포
- [x] Vercel 배포 설정
- [x] 환경 변수 설정
- [x] CI/CD 파이프라인 구축 (GitHub Actions)
- [x] 도메인 설정 (필요시)
- [x] 모니터링 도구 설정
  - [x] Sentry 에러 추적
  - [x] 성능 모니터링

### 8. 문서화
- [x] API 문서 작성
- [x] 컴포넌트 문서 작성 (Storybook)
- [x] 배포 가이드 작성
- [x] 사용자 매뉴얼 작성
- [x] README.md 업데이트

## 목차
PRD
├── 1. 프로젝트 개요
│   ├── 1.1 프로젝트 명
│   ├── 1.2 배경 및 목적
│   └── 1.3 목표
├── 2. 주요 기능 요구사항
│   ├── 2.1 데이터 관리 기능
│   ├── 2.2 UI/UX 요구사항
│   ├── 2.3 기술 요구사항
│   │   ├── Frontend
│   │   ├── Backend
│   │   ├── 배포
│   │   ├── 보안
│   │   └── 성능
│   ├── 2.4 데이터 모델
│   └── 2.5 사용자 스토리
├── 3. 비기능 요구사항
│   ├── 3.1 성능
│   ├── 3.2 확장성
│   ├── 3.3 유지보수성
│   └── 3.4 접근성
├── 4. 개발 일정
├── 5. 위험 요소 및 대안
│   ├── 데이터 마이그레이션
│   ├── 인증/인가 미비
│   └── UI 호환성
└── 6. 승인 기준

## 1. 프로젝트 개요

### 1.1 프로젝트 명
- 업무 입력 관리 웹 어플리케이션

### 1.2 배경 및 목적
현재 Python 기반의 데스크톱 GUI 프로그램(예: PyQt, Tkinter 등 사용 추정)을 통해 특정 날짜별 작업 인력, 업체, 장소, 시간정보(시작/종료), 주/야/심야 작업 시간 계산, 추가금액, 메모 등을 관리하고 있다.

**기존 프로그램의 단점:**
- 설치형/로컬 PC 환경 의존: 특정 머신에서만 사용 가능
- UI/UX 개선 한계: Python GUI 라이브러리 의존적인 UI 구성
- 협업 및 접근성 제약: 웹 접근성 부족, 다수 사용자 동시접속 불가, 데이터 중앙 관리 어려움

이에 따라 Next.js, Tailwind CSS, shadcn UI를 적용한 웹 애플리케이션으로 전환하여 다음을 달성하고자 한다:
- 웹 기반 배포로 어디서든 접근 가능
- 현대적인 UI/UX 및 반응형 디자인 구현
- 효율적인 데이터베이스 연동 및 중앙화된 관리
- 향후 확장성(다중 사용자 관리, 권한체계, 통계/리포팅) 확보

### 1.3 목표
- 기존 프로그램의 모든 핵심 기능(작업자 정보 입력, 업체/장소/시간정보, 작업시간 계산, 저장/조회/수정/삭제)을 웹으로 전환
- 날짜별, 조건별 검색 및 필터링 기능 강화
- Tailwind CSS와 shadcn UI를 통한 모던하고 일관된 UI 디자인
- Next.js를 활용한 SSR 및 SEO 개선 (필요 시), 빌드/배포 최적화
- Backend API 연동(예: Node.js + Express, 또는 Next.js API Routes)으로 DB CRUD 구현
- 기초 인증/인가 시스템(향후 확장 가능)

## 2. 주요 기능 요구사항

### 2.1 데이터 관리 기능
- 날짜별 작업자 목록 표시
  - 각 레코드: 날짜, 이름, 업체명, 장소, 시작시간, 종료시간, 주간/야간/심야 근무시간, 추가금액, 메모 필드를 포함
- 신규 데이터 입력
- 기존 데이터 수정
- 데이터 삭제(확인 모달 필요)
- 당일/특정일자 검색, 특정 조건(이름, 업체명 등) 필터링

### 2.2 UI/UX 요구사항
- 좌측 패널: 검색/필터/입력 폼 (기존 GUI처럼)
- 우측 영역: 데이터 테이블 형태로 날짜별 리스트 표시
- 반응형 디자인: PC, 태블릿, 모바일 환경에서 최소한으로 깨지지 않도록 대응
- shadcn UI를 활용한 모달, 버튼, Input, Dropdown, Date Picker, Table 컴포넌트 활용
- Tailwind CSS를 통한 커스터마이징 및 빠른 스타일 관리
- 일관된 색상 팔레트, 폰트, 공간 배치
- CRUD 작업 시 사용자에게 명확한 피드백(성공/실패 토스트 메시지)

### 2.3 기술 요구사항

#### Frontend:
- Next.js (13 이상)
  - App Router 사용 (새로운 라우팅 방식)
- Tailwind CSS 통합
- shadcn UI 라이브러리를 통한 디자인 시스템 구축

#### Backend:
- Next.js API Routes 또는 별도 Express 서버
- 데이터베이스: Supabase
- Prisma ORM (선택사항) 또는 Supabase SDK 사용
- JWT 기반 인증 (추후 확장)

#### 배포:
- Vercel 또는 AWS Amplify/GCP/Netlify 등 Cloud 플랫폼
- CI/CD 파이프라인 구축 (GitHub Actions 등)

#### 보안:
- HTTPS 사용
- 인증/인가 프로세스 준비 (추후 확장)

#### 성능:
- SSR 및 SSG 고려
- 페이지 로딩 최적화
- DB 인덱스 활용으로 빠른 검색

### 2.4 데이터 모델 (예시)

**WorkRecord:**
- `id`: 고유 식별자 (ObjectId 또는 UUID)
- `date`: 날짜 (YYYY-MM-DD)
- `name`: 문자열 (작업자 이름)
- `company`: 문자열 (업체명)
- `location`: 문자열 (장소)
- `startTime`: 시:분 (예: "08:30")
- `endTime`: 시:분 (예: "17:30")
- `dayHour`: 정수 (주간 작업 시간)
- `nightHour`: 정수 (야간 작업 시간)
- `lateNightHour`: 정수 (심야 작업 시간)
- `extraPay`: 정수 (추가금액)
- `memo`: 문자열 (메모)

> 추가적으로 dayHour, nightHour, lateNightHour는 startTime과 endTime, 그리고 특정 시간 구간(예: 야간: 22:00~06:00) 계산 로직에 의해 자동 계산될 수 있음.

### 2.5 사용자 스토리(Use Cases)
1. 관리자/사용자가 웹사이트에 접속한다.
2. 좌측 상단에서 원하는 날짜를 선택한다.
3. 해당 날짜의 작업 내역 테이블이 우측에 표시된다.
4. 사용자가 작업 내역을 추가하려면 좌측 폼에서 이름, 업체, 시작-종료 시간 등을 입력한 뒤 저장 버튼을 누른다.
5. 테이블에 새로운 레코드가 반영된다.
6. 기존 레코드를 수정하기 위해 테이블 행을 클릭하면 해당 정보가 좌측 폼에 로딩되고 수정 후 "수정" 버튼으로 반영된다.
7. 특정 레코드를 삭제하기 위해 "삭제" 버튼 누르면 확인 모달 표시 후 삭제 수행.
8. 필요 시 이름이나 업체명으로 빠른 필터링/검색이 가능하다.

## 3. 비기능 요구사항

### 3.1 성능
- 페이지 로드 시 날짜별 데이터를 빠르게 가져올 수 있어야 함(1초 이내 로드 목표)
- 수백~수천 건의 데이터를 다룰 때도 필터링 가능한 수준의 성능 유지

### 3.2 확장성
- 향후 사용자 로그인/권한, 장비 대여 정보 관리, 다양한 보고서/엑셀 다운 등 기능 확장 용이한 구조

### 3.3 유지보수성
- 모듈화된 컴포넌트 구조
- well-documented code, 주석, README 제공
- 환경변수/설정 등 별도 관리

### 3.4 접근성
- 기본적인 웹 접근성 기준 준수(ARIA 라벨, 명확한 대비 등)

## 4. 개발 일정(예시)

| 기간 | 내용 |
|------|------|
| 1주차 | 요구사항 정리, 디자인 시안 도출 |
| 2주차 | 프로젝트 초기 설정(Next.js, Tailwind, shadcn UI), DB 스키마 설계 |
| 3~4주차 | UI 컴포넌트 구현(입력 폼, 테이블, 모달), DB 연동 CRUD API 개발 |
| 5주차 | 검색/필터 기능 구현, 토스트/피드백, 최종 UI 다듬기 |
| 6주차 | 테스트 및 버그 수정, 문서화, 배포 세팅 |
| 7주차 | 스테이징 테스트 후 실제 운영 배포 |

## 5. 위험 요소 및 대안

### 데이터 마이그레이션
- 기존 Python 프로그램 DB와의 호환성 문제 해결 필요
- 대안: 초기에 CSV/XLS 등으로 내보낸 뒤 웹 앱 DB로 Import 스크립트 작성

### 인증/인가 미비
- 초기 버전은 로컬/내부용으로 사용하고, 확장 시 JWT/OAuth 추가

### UI 호환성
- shadcn UI나 Tailwind CSS 업데이트 시 호환성 체크 필요

## 6. 승인 기준
- 지정한 날짜별 데이터가 성공적으로 표시, 추가, 수정, 삭제되는지 확인
- 필수 필드 입력 시 정상 동작
- UI 오차 및 반응형 이슈 최소화
- 최소 1명의 관리자 및 협력자 테스트 후 문제 없을 것